@import "tailwindcss";
@plugin "daisyui";

/* Optional: set default theme */
@plugin "daisyui" {
  themes: light --default;
}

@layer base {
  :root {
    --mtga-bg: #f7f8fb;
    --mtga-surface: #ffffff;
    --mtga-surface-soft: #f3f6fa;
    --mtga-border: #e5e7eb;
    --mtga-accent: #f0bb32;
    --mtga-accent-strong: #d9a307;
    --mtga-warn: #f59e0b;
    --mtga-text: #0f172a;
    --mtga-text-muted: #64748b;

    /* 覆盖 daisyUI 的 primary 颜色 */
    --color-primary: var(--mtga-accent);
    --color-primary-content: #1e293b;
  }

  /* 自定义全局滚动条样式 */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--mtga-border); /* 使用定义的边框颜色作为默认色 */
    border-radius: 10px;
    border: 1px solid transparent; /* 增加一点内边距效果 */
    background-clip: padding-box;
    transition: background 0.2s ease;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--mtga-accent); /* 悬停时使用品牌色 */
    border: 1px solid transparent;
    background-clip: padding-box;
  }

  /* 针对 Firefox 的兼容性 */
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--mtga-border) transparent;
  }

  body {
    background-color: var(--mtga-bg);
    background-image:
      radial-gradient(circle at 15% 20%, rgba(240, 187, 50, 0.1), transparent 40%),
      radial-gradient(circle at 85% 0%, rgba(217, 163, 7, 0.08), transparent 38%),
      linear-gradient(120deg, #f8fafc 0%, #fffbeb 55%, #f1f5f9 100%);
    color: var(--mtga-text);
  }
}

@layer components {
  .mtga-card {
    @apply rounded-2xl border border-slate-200/70 bg-white/85 shadow-[0_18px_45px_-32px_rgba(15,23,42,0.4)];
  }

  .mtga-card-body {
    @apply p-5;
  }

  .mtga-card-title {
    @apply text-base font-semibold tracking-tight text-slate-900;
  }

  .mtga-card-subtitle {
    @apply text-xs text-slate-500;
  }

  .mtga-chip {
    @apply inline-flex items-center gap-2 rounded-full border border-slate-200/80 bg-white/90 px-3 py-1 text-xs text-slate-600 shadow-sm;
  }

  .mtga-soft-panel {
    @apply rounded-xl border border-slate-200/80 p-3;
  }

  /* 
     mtga-tooltip 基础定义
     我们保留原生 tooltip 类以支持 daisyUI 的基础样式（如 cursor），
     但通过全局代理元素来渲染实际的提示框，以逃逸 overflow: hidden。
  */
  .mtga-tooltip {
    position: relative;
    z-index: 30;
  }

  /* 隐藏原生的 daisyUI tooltip 伪元素，改用全局代理 */
  .mtga-tooltip::before,
  .mtga-tooltip::after {
    display: none !important;
  }

  /* 全局 Tooltip 代理样式 */
  .mtga-tooltip-proxy {
    position: fixed;
    z-index: 9999;
    pointer-events: none;
    
    /* 基础视觉样式：匹配按钮悬停态与品牌色 */
    background-color: #fffbeb; /* amber-50 */
    color: var(--mtga-text);
    border: 1px solid var(--mtga-accent); /* 使用品牌金黄色 */
    padding: 0.5rem 0.75rem;
    border-radius: 0.75rem; /* 匹配按钮的 rounded-xl */
    font-size: 0.75rem;
    font-weight: 500;
    line-height: 1.25rem;
    box-shadow: 0 10px 15px -3px rgba(240, 187, 50, 0.2); /* 带有品牌色的阴影 */
    white-space: pre-line;
    text-align: left;
    word-break: break-all;
    max-width: var(--mtga-tooltip-max, 280px);

    /* 动画效果 */
    animation: mtga-tooltip-in 0.15s ease-out forwards;

    /* 锚点定位核心 */
    @supports (anchor-name: --test) {
      position-anchor: --mtga-tooltip-anchor;
      bottom: calc(anchor(top) + 10px);
      left: anchor(center);
      translate: -50% 0;
      top: auto;
    }
  }

  /* 代理元素的箭头 */
  .mtga-tooltip-proxy::after {
    content: "";
    position: absolute;
    bottom: -5px; /* 微调位置以对齐边框 */
    left: 50%;
    translate: -50% 0;
    width: 8px;
    height: 8px;
    background-color: #fffbeb;
    border-right: 1px solid var(--mtga-accent);
    border-bottom: 1px solid var(--mtga-accent);
    transform: rotate(45deg);
  }

  @keyframes mtga-tooltip-in {
    from { opacity: 0; transform: scale(0.95) translateY(4px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
  }
}
